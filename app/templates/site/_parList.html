<div class="loader"></div>
<style>
    .loader {
	position: fixed;
	left: 0px;
	top: 0px;
	width: 100%;
	height: 100%;
	z-index: 9999;
	background: url("{{ url_for('static', filename = 'assets/page-loader.gif') }}")  50% 50% no-repeat rgb(249,249,249);
}
</style>

<div class="row header-l">
    <div class="content-list background-gray">
        <h4>Парламентарни избори</h4>
        <!-- beginning of the year 2014 -->
        <!-- first indicator -->
    <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="col-md-2">
              {% include "site/_map_parl_2014.html" %}
        </div>
    <div class="col-md-10">

        <div class="col-md-12 year-list"><a href="{{ url_for('type.electionType', datasource='2', typeizbori = 'parlamentarni', year=2014, instanca='4', krug='none') }}">2014</a></div>
        <div class="col-md-12 col-sm-12 col-xs-12 indicator-row">
                <div class="col-md-3 col-sm-4 col-xs-4 name-list name-list1_2014"></div>
                <div class="col-md-1 col-sm-3 col-xs-3">
                    <p class="nr-votes nr-votes1_2014"></p>
                </div>
                <div class="col-md-7 col-sm-3 col-xs-3">
                    <div class="progress custom-progress">
                        <div class="progress-bar first-progress-2014" style="" role="progressbar" aria-valuenow="50%" aria-valuemin="0" aria-valuemax="100" >
                          <span class="sr-only">Complete</span>
                        </div>
                    </div>
                </div>
             <div class="col-md-1 col-sm-2 col-xs-2 percentage1-2014">
             </div>
        </div>
     <div class="col-md-12 col-sm-12 col-xs-12">
                 <div class="col-md-3 col-sm-4 col-xs-4 name-list name-list2_2014"></div>
            <div class="col-md-1 col-sm-3 col-xs-3">
                <p class="nr-votes nr-votes2_2014"></p>
            </div>
            <div class="col-md-7 col-sm-3 col-xs-3">
                <div class="progress custom-progress">
                    <div class="progress-bar  progressbar-red second-progress-2014" role="progressbar" style="" aria-valuenow="" aria-valuemin="0" aria-valuemax="100">
                      <span class="sr-only">Complete</span>
                    </div>
                </div>
            </div>
            <div class="col-md-1 col-sm-2 col-xs-2 percentage2-2014">

            </div>
    </div>
    </div>
    </div>

        <!-- end of the first indicatior -->
        <!-- second indicator -->
        <!-- end of the second indicatior -->
        <!-- end of year 2014 -->

    <!-- other year -->
        <div class="col-md-12 col-sm-12 col-xs-12">
             <div class="col-md-2">
              {% include "site/_map_parl_2012.html" %}
        </div>
    <div class="col-md-10">
        <div class="col-md-12 year-list"><a href="{{ url_for('type.electionType', datasource='2', typeizbori = 'parlamentarni', year=2014, instanca='4', krug='none') }}">2012</a></div>
        <div class="col-md-12 col-sm-12 col-xs-12 indicator-row">

                <div class="col-md-3 col-sm-4 col-xs-4 name-list name-list1_2012"></div>
                <div class="col-md-1 col-sm-3 col-xs-3">
                    <p class="nr-votes nr-votes1_2012"></p>
                </div>
                <div class="col-md-7 col-sm-3 col-xs-3">
                    <div class="progress custom-progress">
                        <div class="progress-bar first-progress-2012" style="" role="progressbar" aria-valuenow="" aria-valuemin="0" aria-valuemax="100" >
                          <span class="sr-only">Complete</span>
                        </div>
                    </div>
                </div>
             <div class="col-md-1 col-sm-2 col-xs-2 percentage1-2012">

                </div>
        </div>
     <div class="col-md-12 col-sm-12 col-xs-12">
                 <div class="col-md-3 col-sm-4 col-xs-4 name-list name-list2_2012"></div>
            <div class="col-md-1 col-sm-3 col-xs-3">
                <p class="nr-votes nr-votes2_2012"></p>
            </div>
            <div class="col-md-7 col-sm-3 col-xs-3">
                <div class="progress custom-progress">
                    <div class="progress-bar  second-progress-2012" role="progressbar" style="" aria-valuenow="" aria-valuemin="0" aria-valuemax="100">
                      <span class="sr-only">Complete</span>
                    </div>
                </div>
            </div>
            <div class="col-md-1 col-sm-2 col-xs-2 percentage2-2012">

            </div>
    </div>
    </div>
    </div>
    </div>


</div>

{#<div class="row header-l">
    <div class="content-list background-gray">
            <h4>Председнички избори</h4>
          <div class="col-md-12 col-sm-12 col-xs-12">
             <div class="col-md-2">
              {% include "site/_site_map_pres_2012.html" %}
        </div>
    <div class="col-md-10">
        <div class="col-md-12 year-list"><a href="{{ url_for('type.electionType', datasource='2', typeizbori = 'predsjednicki', year=2012, instanca='1', krug='drugi') }}">2012</a></div>
        <div class="col-md-12 col-sm-12 col-xs-12 indicator-row">

                <div class="col-md-3 col-sm-4 col-xs-4 name-list name-list1_2012_pres"></div>
                <div class="col-md-1 col-sm-3 col-xs-3">
                    <p class="nr-votes nr-votes1_2012_pres"></p>
                </div>
                <div class="col-md-7 col-sm-3 col-xs-3">
                    <div class="progress custom-progress">
                        <div class="progress-bar first-progress-2012_pres" style="" role="progressbar" aria-valuenow="" aria-valuemin="0" aria-valuemax="100" >
                          <span class="sr-only">Complete</span>
                        </div>
                    </div>
                </div>
             <div class="col-md-1 col-sm-2 col-xs-2 percentage">

                </div>
        </div>
     <div class="col-md-12 col-sm-12 col-xs-12">
                 <div class="col-md-3 col-sm-4 col-xs-4 name-list name-list2_2012_pres"></div>
            <div class="col-md-1 col-sm-3 col-xs-3">
                <p class="nr-votes nr-votes2_2012"></p>
            </div>
            <div class="col-md-7 col-sm-3 col-xs-3">
                <div class="progress custom-progress">
                    <div class="progress-bar  second-progress-2012_pres" role="progressbar" style="" aria-valuenow="" aria-valuemin="0" aria-valuemax="100">
                      <span class="sr-only">Complete</span>
                    </div>
                </div>
            </div>
            <div class="col-md-1 col-sm-2 col-xs-2 percentage">

            </div>
    </div>
    </div>
</div>
</div>
</div>#}
<script>

    $(window).load(function() {

        $(".loader").css("display", "none");

        var years = [2012, 2014];
        var arrayLength=years.length;
            $.ajax({
            type: "GET",
            url: "{{ url_for("static",filename="data/landingpage.json") }}",
            async: false,
           dataType: 'json',

           success: function (response) {
               console.log(response);
               for (var i = 0; i < arrayLength; i++) {

                   $('.first-progress-' + years[i]).css('background-color', response['par_'+years[i]][0]['boja']);
                   $('.second-progress-' + years[i]).css('background-color', response['par_'+years[i]][1]['boja']);
               }
               $('.first-progress-2012_pres').css('background-color', response['pres_2012'][0]['boja']);
               $('.second-progress-2012_pres').css('background-color', response['pres_2012'][1]['boja']);
                 for (var i = 0; i < arrayLength; i++) {
                     $('.name-list1_' + years[i]).text(response['par_'+years[i]][0]['izbornaLista']);
                     $('.name-list2_' + years[i]).text(response['par_'+years[i]][1]['izbornaLista']);
                     var nr_votes_1 = response['par_'+years[i]][0]['glasova'].toLocaleString();
                     var nr_votes_2 = response['par_'+years[i]][1]['glasova'].toLocaleString();
                     $('.nr-votes1_' + years[i]).text(nr_votes_1);
                     $('.nr-votes2_' + years[i]).text(nr_votes_2);
                     var udeo1 = response['par_'+years[i]][0]['udeo'];
                     var udeo2 = response['par_'+years[i]][1]['udeo'];
                     $('.first-progress-' + years[i]).css('width', udeo1.toFixed(2) + '%');
                     $('.second-progress-' + years[i]).css('width', udeo2.toFixed(2) + '%');
                     $('.percentage1-'+years[i]).html(udeo1.toFixed(2) + '%');
                     $('.percentage2-'+years[i]).html(udeo2.toFixed(2) + '%');
                 }

                    $('.name-list1_2012_pres').text(response['pres_2012'][0]['kandidat']);
                     $('.name-list2_2012_pres').text(response['pres_2012'][1]['kandidat']);
                     var nr_votes_1 = response['pres_2012'][0]['glasova'].toLocaleString();
                     var nr_votes_2 = response['pres_2012'][1]['glasova'].toLocaleString();
                     $('.nr-votes1_2012_pres').text(nr_votes_1);
                     $('.nr-votes2_2012_pres').text(nr_votes_2);
                     var udeo1 = response['pres_2012'][0]['udeo'];
                     var udeo2 = response['pres_2012'][1]['udeo'];
                     $('.first-progress-2012_pres').css('width', udeo1.toFixed(2) + '%');
                     $('.second-progress-2012_pres').css('width', udeo2.toFixed(2) + '%');
           },
           error: function (error) {
               console.log(error);
           }
       });


        })
</script>
